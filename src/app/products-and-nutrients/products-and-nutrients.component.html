
<h1 class="header-main">ДИЕТОЛОГ</h1>
<div class="row">
  <div class="column">

    <div class="filter-prod">
        <div>
          <label>
            &nbsp; &nbsp; &nbsp;1. <input type="checkbox" [(ngModel)]="params.valued_ontop" (change)="finalSorting()">Поместить продукты с выбранными ненулевыми количествами вверху списка
          </label>
          <button class="improve-button" title="Добавить в раскладку один из рекомендованных продуктов (+100 гр.)" (click)="improveProductValues(100)">+100</button>
          <button class="improve-button" title="Добавить в раскладку один из рекомендованных продуктов (+500 гр.)" (click)="improveProductValues(500)">+500</button>
          <p><label>
            &nbsp; &nbsp; &nbsp;2. <input type="checkbox" [(ngModel)]="params.sortBySubstr" (change)="finalSorting()">Затем поместить верху списка продукты, содержащие подстроку:
             <input [(ngModel)]="params.textSort" type="text" >
           </label></p>
          <p><label>
            &nbsp; &nbsp; &nbsp;3. Затем сортировать продукты по содержанию нутриента:
            <select (change)="onSelectSorting($event)">
              <option value = -1> </option>
              <option *ngFor="let nutrient of nutrients" [value] = "nutrient.id"> {{nutrient.name}}</option>
            </select>
          </label></p>
          <label>
            &nbsp; &nbsp; &nbsp;Подсвечивать по &nbsp; <input type="number" [(ngModel)]="params.topCountRecommendedProducts" (change)="recalcNutrients()"> &nbsp; рекомендованных продуктов на нутриент
          </label>
          <button class="xls-button" (click)="toExcel()">Excel</button>
          <p> &nbsp;</p>
        </div>
    </div>
    <p></p>

    <div>
      <ng-container >
        <div class="heiht-table-prod">
          <table class="table-prod">
            <caption class="header-table-prod">Продукты</caption>
            <th class="th-prod">{{'Количество(гр.)'}}</th>
            <th class="th-prod">{{'Продукт'}}</th>
            <th class="th-prod">{{'Исключен'}}  <input #exclude_All type="checkbox" title="Исключить все ненулевые" (change)="excludeAll(exclude_All.checked)"> </th>
            <tr *ngFor="let product of products" [ngClass]="getClassProduct(product)">
              <input type="number" title="{{product.hint}}" [(ngModel)]="product.val" (change)="recalcNutrients()" [disabled]="product.excluded">
              <td title="{{product.hint}}" [ngClass]="product.excluded?'excluded-product':''" >{{product.name}}</td>
              <input type="checkbox" title="{{product.hint}}" [(ngModel)]="product.excluded" (change)="setZeroAndRecalcNutrients(product)">
            </tr>
          </table>
        </div>
      </ng-container>
    </div>
  </div>



  <div class="column">
    <ng-container >
      <div class="heiht-table-nutr">
        <table class="table-nutr">
          <caption class="header-table-nutr">Нутриенты</caption>
          <th class="th-nutr">{{'Нутриент'}}</th>
          <th class="th-nutr">{{'Единицы измерения'}}</th>
          <th class="th-nutr">{{'Минимальная суточная норма'}}</th>
          <th class="th-nutr">{{'Максимальная суточная норма'}}</th>
          <th class="th-nutr">{{'Количество в текущей раскладке(гр.)'}}</th>
          <tr *ngFor="let nutrient of nutrients" [ngClass]="getClassNutrient(nutrient)">
            <td title="{{nutrient.hint}}" >{{nutrient.name}}</td>
            <td title="{{nutrient.hint}}">{{nutrient.units}}</td>
            <td title="{{nutrient.hint}}">{{nutrient.min_dailyrate}}</td>
            <td title="{{nutrient.hint}}">{{nutrient.max_dailyrate}}</td>
            <td title="{{nutrient.hint}}">{{nutrient.val | number : '1.0-3'}}</td>
          </tr>
        </table>
      </div>
    </ng-container>
  </div>
</div>
<p style="font-style: italic;">version 1.1</p>


